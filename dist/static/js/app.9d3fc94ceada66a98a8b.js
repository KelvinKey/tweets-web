webpackJsonp([6],{"6BvI":function(t,e){},AmmR:function(t,e,n){"use strict";var s=n("hRKE"),r=n.n(s);function a(t,e,n){n=n&&"object"===(void 0===n?"undefined":r()(n))?n:{};var s="string"==typeof t.value?t.value.trim():"",a=n,c=a.title,u=void 0===c?"该项":c,l=a.error,d="";if(e.required&&""===s)d=u+"不能为空";else if(n.target){var v=document.querySelector(n.target);(v?v.value:null)!==s&&(d="输入的"+u+"不匹配")}else if(n.regex)try{n.regex.test(s)||(d=u+"格式不正确")}catch(t){}d?o(t,void 0===l?d:l):o(t),i(t)}function o(t,e){var n=t.parentElement,s=function(t){var e=t.parentElement,n=e.querySelector(".help-block");if(!n){var s=document.createRange().createContextualFragment('<span class="help-block"></span>');e.appendChild(s),n=e.querySelector(".help-block")}return n}(t);void 0===e?(s.style.display="none",n.classList.remove("has-error")):(s.textContent=e,s.style.display="block",n.classList.add("has-error"))}function i(t){var e=t.closest("[data-validator-form]"),n=e.querySelector("[type=submit]"),s=e.querySelectorAll(".has-error");n.canSubmit=!s.length}e.a={bind:function(t,e,n){var s=e.value,r=e.arg,c=e.modifiers,u=-1!==["change","blur","input"].indexOf(r)?r:"change",l=function(){o(t)},d=function(){a(t,c,s)};t.addEventListener("input",l,!1),t.addEventListener(u,d,!1),t.destroy=function(){t.removeEventListener("input",l,!1),t.removeEventListener(u,d,!1),t.destroy=null},window.onload=function(){return i(t)}},inserted:function(t,e,n){var s=e.value,r=e.modifiers,o=t.closest("[data-validator-form]"),i=o?o.querySelector("[type=submit]"):null;if(i){var c=function(){return a(t,r,s)};t.destroySubmitBtn=function(){i.removeEventListener("click",c,!1),t.destroySubmitBtn=null}}},unbind:function(t){t.destroy(),t.destroySubmitBtn&&t.destroySubmitBtn()},showError:o}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={};n.d(s,"attemptLogin",function(){return V}),n.d(s,"attemptRegister",function(){return q}),n.d(s,"logout",function(){return M}),n.d(s,"setUser",function(){return W}),n.d(s,"setToken",function(){return Z}),n.d(s,"checkUserToken",function(){return D}),n.d(s,"loadUser",function(){return G});var r={};n.d(r,"isLogged",function(){return Q}),n.d(r,"authToken",function(){return Y}),n.d(r,"currentUser",function(){return X});var a=n("xd7I"),o=n("4YfN"),i=n.n(o),c=n("48sp"),u={name:"Entry",computed:i()({},Object(c.c)(["currentUser","isLogged"])),methods:{logout:function(){this.$store.dispatch("logout"),this.$message.success("退出成功")}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-right"},[t.isLogged?n("ul",{staticClass:"nav navbar-nav github-login"},[n("li",[n("a",{directives:[{name:"dropdown",rawName:"v-dropdown"}],attrs:{href:"javascript:;"}},[t.currentUser?n("span",[t.currentUser.avatar?n("img",{staticClass:"avatar-topnav",attrs:{src:t.currentUser.avatar}}):t._e(),t._v(" "),t.currentUser.username?n("span",[t._v(t._s(t.currentUser.username))]):t._e()]):n("span",[t._v("佚名")]),t._v(" "),n("span",{staticClass:"caret"})]),t._v(" "),n("ul",{staticClass:"dropdown-menu"},[n("li",[n("a",{attrs:{href:"javascript:;"},on:{click:t.logout}},[n("i",{staticClass:"fa fa-sign-out text-md"}),t._v("退出")])])])])]):n("div",{staticClass:"nav navbar-nav github-login auth"},[n("router-link",{staticClass:"auth-btn",attrs:{to:"/auth/login"}},[t._v("登录")]),t._v(" "),n("router-link",{staticClass:"auth-btn",attrs:{to:"/auth/register"}},[t._v("注册")])],1)])},staticRenderFns:[]};var d={name:"Header",data:function(){return{navList:["首页","关于"],activeNavIndex:0,showCollapsedNav:!1}},components:{Entry:n("C7Lr")(u,l,!1,function(t){n("x4sc")},"data-v-43fef1aa",null).exports},methods:{changeNavIndex:function(t){this.activeNavIndex=t},toggleNav:function(){this.showCollapsedNav=!this.showCollapsedNav}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar navbar-default topnav"},[n("div",{staticClass:"container"},[n("div",{staticClass:"navbar-header"},[n("button",{staticClass:"navbar-toggle",attrs:{type:"button"},on:{click:t.toggleNav}},[n("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),t._v(" "),n("span",{staticClass:"icon-bar"}),t._v(" "),n("span",{staticClass:"icon-bar"}),t._v(" "),n("span",{staticClass:"icon-bar"})]),t._v(" "),t._m(0)]),t._v(" "),n("div",{class:["collapse","navbar-collapse",{in:t.showCollapsedNav}],attrs:{id:"top-navbar-collapse"}},[n("ul",{staticClass:"nav navbar-nav"},t._l(t.navList,function(e,s){return n("li",{key:e,class:{active:s===t.activeNavIndex}},[n("a",{attrs:{href:"/"},on:{click:function(e){return t.changeNavIndex(s)}}},[t._v(t._s(e))])])}),0),t._v(" "),n("div",{staticClass:"navbar-right"},[n("Entry")],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[e("span",{staticClass:"title"},[this._v("Tweets")])])}]};var f={name:"App",components:{Header:n("C7Lr")(d,v,!1,function(t){n("Uy0E")},"data-v-73852f70",null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"wrap"}},[e("Header"),this._v(" "),e("div",{staticClass:"container main-container",attrs:{id:"main-container"}},[e("router-view")],1)],1)},staticRenderFns:[]};var j=n("C7Lr")(f,h,!1,function(t){n("6BvI")},null,null).exports,p=n("7LQH"),m=[{path:"/",name:"Home",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"XwkR"))}},{path:"/auth/register",name:"Register",component:function(){return n.e(4).then(n.bind(null,"0jH9"))}},{path:"/auth/validate-phone",name:"ValidatePhone",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"kA1v"))}},{path:"/auth/login",name:"Login",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"3Jfp"))}},{path:"/tweets/:tid",name:"ShowTweet"}];a.default.use(p.a);var g=new p.a({mode:"history",routes:m});g.beforeEach(function(t,e,n){g.app.$options.store.getters.isLogged&&-1!==t.path.indexOf("/auth/")?n("/"):n()});var y,b=g,k=n("Muz9"),E=n.n(k),C=n("rVsN"),N=n.n(C),w=n("TcQY"),L=n("3cXf"),S=n.n(L),U=localStorage,_=function(t,e){"string"!=typeof e&&(e=S()(e)),U.setItem(t,e)},z=function(t){var e=U.getItem(t);try{return JSON.parse(e)}catch(t){return e}},x=function(t){U.removeItem(t)},A=E.a.create({baseURL:"http://tweets.hxhsoft.cn/api/",timeout:1e4});(y=A).interceptors.request.use(function(t){return t.headers.common.Authorization="Bearer "+z("token"),t},function(t){return N.a.reject(t)}),y.interceptors.response.use(function(t){return t.data},function(t){if(!t.response)return N.a.reject(t);switch(t.response.status){case 422:case 403:w.Message.error(t.response.data.message||"您没有此操作权限！");break;case 401:"/auth/login"!==window.location.pathname&&(window.location.href="/auth/login");break;case 500:case 501:case 503:default:w.Message.error("服务器出了点小问题，程序员小哥哥要被扣工资了~！")}return N.a.reject(t.response)});var H,K=A,O=n("a3Yh"),T=n.n(O),R=n("ZLEe"),B=n.n(R),J={user:z("user"),token:z("token")},I=(H={},T()(H,"Auth//SET_TOKEN",function(t,e){t.token=e,_("token",e)}),T()(H,"Auth//SET_USER",function(t,e){t.user=e,_("user",e)}),H),F=n("i7YX"),V=function(t,e){var n=t.dispatch;return K.post("auth/login",e).then(function(t){return n("setToken",t.access_token),N.a.resolve()}).then(function(){return n("loadUser")})},q=function(t,e){var n=t.dispatch;return K.post("auth/register",e).then(function(t){return n("setToken",t.token),N.a.resolve()}).then(function(){return n("loadUser")})},M=function(t){var e=t.dispatch;x("token"),e("setToken",null),e("setUser",null)},W=function(t,e){(0,t.commit)("Auth//SET_USER",e),N.a.resolve(e)},Z=function(t,e){var n=t.commit,s=Object(F.isEmpty)(e)?null:e.token||e;return n("Auth//SET_TOKEN",s),N.a.resolve(s)},D=function(t){var e=t.dispatch,n=t.state;return Object(F.isEmpty)(n.token)?z("token").then(function(t){return Object(F.isEmpty)(t)?N.a.reject("NO_TOKEN"):e("setToken",t)}).then(function(){return e("loadUser")}):N.a.resolve(n.token)},G=function(t){var e=t.dispatch;return K.get("user/me").then(function(t){return e("setUser",t)}).catch(M)},Q=function(t){var e=t.token;return!Object(F.isEmpty)(e)},Y=function(t){return t.token},X=function(t){return t.user},$={Auth:{module:{state:J,mutations:I,actions:s,getters:r}}},P={modules:B()($).reduce(function(t,e){return i()({},t,T()({},e,$[e].module))},{})};a.default.use(c.a);var tt=new c.a.Store({modules:P.modules,strict:!1}),et=n("Q+Ik"),nt=n.n(et),st=n("HzJ8"),rt=n.n(st),at=n("KH7x"),ot=n.n(at),it={bind:function(t,e,n){var s=function(){t.parentElement.classList.toggle("open")},r=function(e){var n=e.target;n.isSameNode(t)||t.contains(n)||t.parentElement.classList.remove("open")};t.addEventListener("click",s,!1),document.addEventListener("click",r,!1),t.destroy=function(){t.removeEventListener("click",s,!1),document.removeEventListener("click",r,!1),t.destroy=null}},unbind:function(t){t.destroy()}},ct={validator:n("AmmR").a,dropdown:it},ut=!0,lt=!1,dt=void 0;try{for(var vt,ft=rt()(nt()(ct));!(ut=(vt=ft.next()).done);ut=!0){var ht=vt.value,jt=ot()(ht,2),pt=jt[0],mt=jt[1];a.default.directive(pt,mt)}}catch(t){lt=!0,dt=t}finally{try{!ut&&ft.return&&ft.return()}finally{if(lt)throw dt}}var gt=n("hRKE"),yt=n.n(gt),bt=n("ryJa"),kt=n.n(bt);kt.a.locale("zh-cn");a.default.filter("moment",function(t){var e=t;if(kt()(e).isValid()){for(var n=arguments.length,s=Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];var a=s.shift();if("string"==typeof a)switch(a){case"from":t=kt()(e).from();var o=s.shift();o&&"object"===(void 0===o?"undefined":yt()(o))&&(t=kt()(e).startOf(o.startOf).from());break;default:t=kt()(e).format(a)}}return t});n("c0NW"),n("x2sN");a.default.config.productionTip=!1,a.default.prototype.$http=K,a.default.prototype.$message=w.Message,a.default.prototype.$user=function(){return tt.getters.currentUser},new a.default({el:"#app",store:tt,router:b,components:{App:j},template:"<App/>"})},Uy0E:function(t,e){},c0NW:function(t,e){},fSkL:function(t,e,n){var s={"./af":"1OrJ","./af.js":"1OrJ","./ar":"bHl5","./ar-dz":"qFyv","./ar-dz.js":"qFyv","./ar-kw":"OhBR","./ar-kw.js":"OhBR","./ar-ly":"3AjD","./ar-ly.js":"3AjD","./ar-ma":"sFwh","./ar-ma.js":"sFwh","./ar-sa":"gg0N","./ar-sa.js":"gg0N","./ar-tn":"lqw4","./ar-tn.js":"lqw4","./ar.js":"bHl5","./az":"xLUF","./az.js":"xLUF","./be":"NWv/","./be.js":"NWv/","./bg":"G9eV","./bg.js":"G9eV","./bm":"zaEJ","./bm.js":"zaEJ","./bn":"/icp","./bn.js":"/icp","./bo":"UyM9","./bo.js":"UyM9","./br":"G5xs","./br.js":"G5xs","./bs":"9h8A","./bs.js":"9h8A","./ca":"8ccl","./ca.js":"8ccl","./cs":"TEiJ","./cs.js":"TEiJ","./cv":"7EVA","./cv.js":"7EVA","./cy":"H6w8","./cy.js":"H6w8","./da":"MSIt","./da.js":"MSIt","./de":"Rl+D","./de-at":"30Vd","./de-at.js":"30Vd","./de-ch":"KKU8","./de-ch.js":"KKU8","./de.js":"Rl+D","./dv":"+DOJ","./dv.js":"+DOJ","./el":"8nDw","./el.js":"8nDw","./en-SG":"1hne","./en-SG.js":"1hne","./en-au":"ZsCN","./en-au.js":"ZsCN","./en-ca":"rHyc","./en-ca.js":"rHyc","./en-gb":"ehFk","./en-gb.js":"ehFk","./en-ie":"Hxoc","./en-ie.js":"Hxoc","./en-il":"oEKo","./en-il.js":"oEKo","./en-nz":"SfkL","./en-nz.js":"SfkL","./eo":"UhWX","./eo.js":"UhWX","./es":"JJW5","./es-do":"LWvi","./es-do.js":"LWvi","./es-us":"RzRn","./es-us.js":"RzRn","./es.js":"JJW5","./et":"pjM/","./et.js":"pjM/","./eu":"oBFE","./eu.js":"oBFE","./fa":"z8Fc","./fa.js":"z8Fc","./fi":"j+B7","./fi.js":"j+B7","./fo":"MuUW","./fo.js":"MuUW","./fr":"CZ8n","./fr-ca":"nDiE","./fr-ca.js":"nDiE","./fr-ch":"T2mj","./fr-ch.js":"T2mj","./fr.js":"CZ8n","./fy":"+eCN","./fy.js":"+eCN","./ga":"6KMf","./ga.js":"6KMf","./gd":"Osat","./gd.js":"Osat","./gl":"3uJi","./gl.js":"3uJi","./gom-latn":"kQyN","./gom-latn.js":"kQyN","./gu":"C85o","./gu.js":"C85o","./he":"Uaie","./he.js":"Uaie","./hi":"KLVO","./hi.js":"KLVO","./hr":"/AQ7","./hr.js":"/AQ7","./hu":"neNx","./hu.js":"neNx","./hy-am":"HL0q","./hy-am.js":"HL0q","./id":"fVYV","./id.js":"fVYV","./is":"pUHy","./is.js":"pUHy","./it":"N5fZ","./it-ch":"KCG7","./it-ch.js":"KCG7","./it.js":"N5fZ","./ja":"bVIB","./ja.js":"bVIB","./jv":"NpB+","./jv.js":"NpB+","./ka":"8RqC","./ka.js":"8RqC","./kk":"pcbE","./kk.js":"pcbE","./km":"o5og","./km.js":"o5og","./kn":"BKte","./kn.js":"BKte","./ko":"vztA","./ko.js":"vztA","./ku":"OmHn","./ku.js":"OmHn","./ky":"gQFs","./ky.js":"gQFs","./lb":"sJOA","./lb.js":"sJOA","./lo":"Wg2E","./lo.js":"Wg2E","./lt":"N5Ie","./lt.js":"N5Ie","./lv":"Z/KU","./lv.js":"Z/KU","./me":"6nQR","./me.js":"6nQR","./mi":"dZ9v","./mi.js":"dZ9v","./mk":"8ttA","./mk.js":"8ttA","./ml":"TFUT","./ml.js":"TFUT","./mn":"Rtcs","./mn.js":"Rtcs","./mr":"ZrND","./mr.js":"ZrND","./ms":"Uszi","./ms-my":"B+3a","./ms-my.js":"B+3a","./ms.js":"Uszi","./mt":"f+DN","./mt.js":"f+DN","./my":"7hhd","./my.js":"7hhd","./nb":"O+uN","./nb.js":"O+uN","./ne":"xB1H","./ne.js":"xB1H","./nl":"pyzp","./nl-be":"6XY9","./nl-be.js":"6XY9","./nl.js":"pyzp","./nn":"wWYI","./nn.js":"wWYI","./pa-in":"khMS","./pa-in.js":"khMS","./pl":"J+lf","./pl.js":"J+lf","./pt":"imZp","./pt-br":"yh7C","./pt-br.js":"yh7C","./pt.js":"imZp","./ro":"/ydL","./ro.js":"/ydL","./ru":"XA72","./ru.js":"XA72","./sd":"K+sy","./sd.js":"K+sy","./se":"HXCg","./se.js":"HXCg","./si":"JhyT","./si.js":"JhyT","./sk":"QL3+","./sk.js":"QL3+","./sl":"KbOk","./sl.js":"KbOk","./sq":"jkQm","./sq.js":"jkQm","./sr":"vGLH","./sr-cyrl":"lZcv","./sr-cyrl.js":"lZcv","./sr.js":"vGLH","./ss":"ikBz","./ss.js":"ikBz","./sv":"gbWe","./sv.js":"gbWe","./sw":"YR+a","./sw.js":"YR+a","./ta":"otVD","./ta.js":"otVD","./te":"3YuF","./te.js":"3YuF","./tet":"IJME","./tet.js":"IJME","./tg":"iKfg","./tg.js":"iKfg","./th":"v87T","./th.js":"v87T","./tl-ph":"otiP","./tl-ph.js":"otiP","./tlh":"L/GK","./tlh.js":"L/GK","./tr":"phcV","./tr.js":"phcV","./tzl":"rgrh","./tzl.js":"rgrh","./tzm":"1pHS","./tzm-latn":"q7e0","./tzm-latn.js":"q7e0","./tzm.js":"1pHS","./ug-cn":"tsGA","./ug-cn.js":"tsGA","./uk":"01SB","./uk.js":"01SB","./ur":"jayG","./ur.js":"jayG","./uz":"k3sX","./uz-latn":"nmSA","./uz-latn.js":"nmSA","./uz.js":"k3sX","./vi":"KTvP","./vi.js":"KTvP","./x-pseudo":"dccK","./x-pseudo.js":"dccK","./yo":"IAhR","./yo.js":"IAhR","./zh-cn":"5Spc","./zh-cn.js":"5Spc","./zh-hk":"ECSc","./zh-hk.js":"ECSc","./zh-tw":"hH/4","./zh-tw.js":"hH/4"};function r(t){return n(a(t))}function a(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}r.keys=function(){return Object.keys(s)},r.resolve=a,t.exports=r,r.id="fSkL"},x2sN:function(t,e){},x4sc:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9d3fc94ceada66a98a8b.js.map